#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Load direnv environment if available
if command -v direnv > /dev/null; then
  eval "$(direnv export bash 2>/dev/null || true)"
fi

echo "üîÑ Post-checkout: Updating submodules and mirror branches..."

# Update submodules to match the checked-out state
git submodule update --init --recursive --jobs=8

# Update mirror branches
npm run branches:update > /dev/null 2>&1 || {
  echo "‚ö†Ô∏è  Mirror branch update failed (non-blocking)"
}

echo "‚úÖ Post-checkout complete"